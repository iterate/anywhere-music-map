{"ast":null,"code":"var _jsxFileName = \"/Users/sherveersinghpannu/projects/map/client_copy/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport SpotifyWebApi from 'spotify-web-api-js';\nimport styled from 'styled-components';\nimport Header from './Components/Header';\nimport Sidebar from './Components/Sidebar';\nimport Content from './Components/Content';\nimport axios from 'axios';\nconst spotifyWeb = new SpotifyWebApi();\n\nfunction App() {\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [checkedOption, setCheckedOption] = useState();\n  const [personalData, setPersonalData] = useState([]);\n  const [topArtists, setTopArtists] = useState([]);\n  let hashParams = {};\n\n  const getHashParams = () => {\n    var e,\n        r = /([^&;=]+)=?([^&;]*)/g,\n        q = window.location.hash.substring(1);\n    e = r.exec(q);\n\n    while (e) {\n      hashParams[e[1]] = decodeURIComponent(e[2]);\n      e = r.exec(q);\n    }\n\n    return hashParams.access_token;\n  };\n\n  useEffect(() => {\n    hashParams.access_token ? setLoggedIn(true) : setLoggedIn(false);\n    getMe();\n    getTopArtists();\n    saveUser();\n  }, []);\n  getHashParams();\n\n  const saveUser = () => {\n    console.log('CALLING SAVEUSER', topArtists);\n    let topArtist = getTopArtists();\n    topArtist.then(function (result) {\n      console.log('top artister', result.name); // \"Some User token\"\n    }); //topArtist.map((artist) => console.log('artistname?', artist.name));\n\n    axios.post('http://localhost:8000/api/user', {\n      username: personalData.display_name,\n      artists: topArtists.map(artist => artist.name)\n    }).then(res => console.log('did it work?', res));\n  };\n\n  const getMe = async () => {\n    const access_t = getHashParams();\n    const result = await fetch(`https://api.spotify.com/v1/me/top/artists?time_range=medium_term&limit=10&offset=5`, {\n      method: 'GET',\n      headers: {\n        Authorization: 'Bearer ' + access_t\n      }\n    }).then(console.log('logeg', loggedIn));\n\n    if (access_t) {\n      spotifyWeb.setAccessToken(access_t);\n      spotifyWeb.getMe() // note that we don't pass a user id\n      .then(function (data) {\n        setPersonalData(data);\n      }, setLoggedIn(true), function (err) {\n        console.error(err);\n      });\n    }\n\n    let data = await result.json();\n    console.log('DATA', data);\n    return data.items;\n  };\n\n  const getTopArtists = async () => {\n    const access_t = getHashParams();\n    const result = await fetch(`https://api.spotify.com/v1/me/top/artists?time_range=medium_term&limit=10&offset=5`, {\n      method: 'GET',\n      headers: {\n        Authorization: 'Bearer ' + access_t\n      }\n    }).then(console.log('logeg', loggedIn));\n\n    if (access_t) {\n      spotifyWeb.setAccessToken(access_t);\n      spotifyWeb.getMyTopArtists() // note that we don't pass a user id\n      .then(function (data) {\n        setTopArtists(data);\n      }, function (err) {\n        console.error(err);\n      });\n    }\n\n    let data = await result.json();\n    setTopArtists(data.items);\n    console.log('DATA', data);\n    return data.items;\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(Wrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Sidebar, {\n    setCheckedOption: setCheckedOption,\n    checkedOption: checkedOption,\n    loggedIn: loggedIn,\n    personalData: personalData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Wrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"body\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"script\", {\n    src: \"https://sdk.scdn.co/spotify-player.js\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(LoginContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 6\n    }\n  }, loggedIn ? /*#__PURE__*/React.createElement(Content, {\n    topArtistData: topArtists,\n    musicData: personalData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 8\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: '10%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"http://localhost:8888\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 10\n    }\n  }, \"Login with Spotify\")))))));\n}\n\nexport default App;\nexport const Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n`;\nexport const Wrapper = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n`;\nexport const LoginContent = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n\tbackground-color: #e0e0e0;\n\twidth: 80vw;\n`;","map":{"version":3,"sources":["/Users/sherveersinghpannu/projects/map/client_copy/src/App.js"],"names":["React","useState","useEffect","SpotifyWebApi","styled","Header","Sidebar","Content","axios","spotifyWeb","App","loggedIn","setLoggedIn","checkedOption","setCheckedOption","personalData","setPersonalData","topArtists","setTopArtists","hashParams","getHashParams","e","r","q","window","location","hash","substring","exec","decodeURIComponent","access_token","getMe","getTopArtists","saveUser","console","log","topArtist","then","result","name","post","username","display_name","artists","map","artist","res","access_t","fetch","method","headers","Authorization","setAccessToken","data","err","error","json","items","getMyTopArtists","padding","Container","div","Wrapper","LoginContent"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport SpotifyWebApi from 'spotify-web-api-js';\nimport styled from 'styled-components';\nimport Header from './Components/Header';\nimport Sidebar from './Components/Sidebar';\nimport Content from './Components/Content';\nimport axios from 'axios';\n\nconst spotifyWeb = new SpotifyWebApi();\n\nfunction App() {\n\tconst [ loggedIn, setLoggedIn ] = useState(false);\n\tconst [ checkedOption, setCheckedOption ] = useState();\n\tconst [ personalData, setPersonalData ] = useState([]);\n\tconst [ topArtists, setTopArtists ] = useState([]);\n\tlet hashParams = {};\n\n\tconst getHashParams = () => {\n\t\tvar e,\n\t\t\tr = /([^&;=]+)=?([^&;]*)/g,\n\t\t\tq = window.location.hash.substring(1);\n\t\te = r.exec(q);\n\t\twhile (e) {\n\t\t\thashParams[e[1]] = decodeURIComponent(e[2]);\n\t\t\te = r.exec(q);\n\t\t}\n\t\treturn hashParams.access_token;\n\t};\n\tuseEffect(() => {\n\t\thashParams.access_token ? setLoggedIn(true) : setLoggedIn(false);\n\t\tgetMe();\n\t\tgetTopArtists();\n\t\tsaveUser();\n\t}, []);\n\n\tgetHashParams();\n\n\tconst saveUser = () => {\n\t\tconsole.log('CALLING SAVEUSER', topArtists);\n\t\tlet topArtist = getTopArtists();\n\t\ttopArtist.then(function(result) {\n\t\t\tconsole.log('top artister', result.name); // \"Some User token\"\n\t\t});\n\t\t//topArtist.map((artist) => console.log('artistname?', artist.name));\n\t\taxios\n\t\t\t.post('http://localhost:8000/api/user', {\n\t\t\t\tusername: personalData.display_name,\n\t\t\t\tartists: topArtists.map((artist) => artist.name)\n\t\t\t})\n\t\t\t.then((res) => console.log('did it work?', res));\n\t};\n\n\tconst getMe = async () => {\n\t\tconst access_t = getHashParams();\n\t\tconst result = await fetch(\n\t\t\t`https://api.spotify.com/v1/me/top/artists?time_range=medium_term&limit=10&offset=5`,\n\t\t\t{\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: 'Bearer ' + access_t\n\t\t\t\t}\n\t\t\t}\n\t\t).then(console.log('logeg', loggedIn));\n\n\t\tif (access_t) {\n\t\t\tspotifyWeb.setAccessToken(access_t);\n\t\t\tspotifyWeb\n\t\t\t\t.getMe() // note that we don't pass a user id\n\t\t\t\t.then(\n\t\t\t\t\tfunction(data) {\n\t\t\t\t\t\tsetPersonalData(data);\n\t\t\t\t\t},\n\t\t\t\t\tsetLoggedIn(true),\n\t\t\t\t\tfunction(err) {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t}\n\t\tlet data = await result.json();\n\t\tconsole.log('DATA', data);\n\t\treturn data.items;\n\t};\n\n\tconst getTopArtists = async () => {\n\t\tconst access_t = getHashParams();\n\t\tconst result = await fetch(\n\t\t\t`https://api.spotify.com/v1/me/top/artists?time_range=medium_term&limit=10&offset=5`,\n\t\t\t{\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: 'Bearer ' + access_t\n\t\t\t\t}\n\t\t\t}\n\t\t).then(console.log('logeg', loggedIn));\n\n\t\tif (access_t) {\n\t\t\tspotifyWeb.setAccessToken(access_t);\n\t\t\tspotifyWeb\n\t\t\t\t.getMyTopArtists() // note that we don't pass a user id\n\t\t\t\t.then(\n\t\t\t\t\tfunction(data) {\n\t\t\t\t\t\tsetTopArtists(data);\n\t\t\t\t\t},\n\t\t\t\t\tfunction(err) {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t}\n\t\tlet data = await result.json();\n\t\tsetTopArtists(data.items);\n\n\t\tconsole.log('DATA', data);\n\t\treturn data.items;\n\t};\n\n\treturn (\n\t\t<Container>\n\t\t\t<Header />\n\t\t\t<Wrapper>\n\t\t\t\t<Sidebar\n\t\t\t\t\tsetCheckedOption={setCheckedOption}\n\t\t\t\t\tcheckedOption={checkedOption}\n\t\t\t\t\tloggedIn={loggedIn}\n\t\t\t\t\tpersonalData={personalData}\n\t\t\t\t/>\n\t\t\t\t<Wrapper>\n\t\t\t\t\t<body>\n\t\t\t\t\t\t<script src=\"https://sdk.scdn.co/spotify-player.js\" />\n\t\t\t\t\t</body>\n\t\t\t\t\t<LoginContent>\n\t\t\t\t\t\t{loggedIn ? (\n\t\t\t\t\t\t\t<Content topArtistData={topArtists} musicData={personalData} />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div style={{ padding: '10%' }}>\n\t\t\t\t\t\t\t\t<a href=\"http://localhost:8888\">\n\t\t\t\t\t\t\t\t\t<button>Login with Spotify</button>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</LoginContent>\n\t\t\t\t</Wrapper>\n\t\t\t</Wrapper>\n\t\t</Container>\n\t);\n}\n\nexport default App;\n\nexport const Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n`;\n\nexport const Wrapper = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n`;\n\nexport const LoginContent = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n\tbackground-color: #e0e0e0;\n\twidth: 80vw;\n`;\n"]},"metadata":{},"sourceType":"module"}