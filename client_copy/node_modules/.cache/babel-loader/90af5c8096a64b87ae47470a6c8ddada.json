{"ast":null,"code":"var _jsxFileName = \"/Users/sherveersinghpannu/projects/map/client_copy/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport SpotifyWebApi from 'spotify-web-api-js';\nimport styled from 'styled-components';\nimport Header from './Components/Header';\nimport Sidebar from './Components/Sidebar';\nimport Content from './Components/Content';\nimport axios from 'axios';\nconst spotifyWeb = new SpotifyWebApi();\n\nfunction App() {\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [checkedOption, setCheckedOption] = useState();\n  const [personalData, setPersonalData] = useState([]);\n  const [topArtists, setTopArtists] = useState([]);\n  let hashParams = {};\n\n  const getHashParams = () => {\n    var e,\n        r = /([^&;=]+)=?([^&;]*)/g,\n        q = window.location.hash.substring(1);\n    e = r.exec(q);\n\n    while (e) {\n      hashParams[e[1]] = decodeURIComponent(e[2]);\n      e = r.exec(q);\n    }\n\n    return hashParams.access_token;\n  };\n\n  useEffect(() => {\n    hashParams.access_token ? setLoggedIn(true) : setLoggedIn(false);\n    getMe();\n    getTopArtists();\n    console.log('PersonalData', personalData);\n  }, []);\n  getHashParams();\n\n  const saveUser = () => {\n    axios.post('http://localhost:8000/api/music', {\n      username: personalData.display_name,\n      artists: topArtists\n    }).then(res => console.log('did it work?', res));\n  };\n\n  const getMe = async () => {\n    const access_t = getHashParams();\n    const result = await fetch(`https://api.spotify.com/v1/me/top/artists?time_range=medium_term&limit=10&offset=5`, {\n      method: 'GET',\n      headers: {\n        Authorization: 'Bearer ' + access_t\n      }\n    }).then(console.log('logeg', loggedIn));\n\n    if (access_t) {\n      spotifyWeb.setAccessToken(access_t);\n      spotifyWeb.getMe() // note that we don't pass a user id\n      .then(function (data) {\n        setPersonalData(data);\n        console.log('data?', data);\n      }, console.log('loggedin before', loggedIn), setLoggedIn(true), console.log('loggedin after', loggedIn), function (err) {\n        console.error(err);\n      });\n    }\n\n    let data = await result.json();\n    console.log('DATA', data);\n    saveUser();\n    return data.items;\n  };\n\n  const getTopArtists = async () => {\n    const access_t = getHashParams();\n    const result = await fetch(`https://api.spotify.com/v1/me/top/artists?time_range=medium_term&limit=10&offset=5`, {\n      method: 'GET',\n      headers: {\n        Authorization: 'Bearer ' + access_t\n      }\n    }).then(console.log('logeg', loggedIn));\n\n    if (access_t) {\n      spotifyWeb.setAccessToken(access_t);\n      spotifyWeb.getMyTopArtists() // note that we don't pass a user id\n      .then(function (data) {\n        setTopArtists(data);\n      }, function (err) {\n        console.error(err);\n      });\n    }\n\n    let data = await result.json();\n    console.log('DATA', data);\n    return data.items;\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(Wrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Sidebar, {\n    setCheckedOption: setCheckedOption,\n    checkedOption: checkedOption,\n    loggedIn: loggedIn,\n    personalData: personalData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Wrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"body\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"script\", {\n    src: \"https://sdk.scdn.co/spotify-player.js\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(LoginContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 6\n    }\n  }, loggedIn ? /*#__PURE__*/React.createElement(Content, {\n    topArtistData: topArtists,\n    musicData: personalData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 8\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: '10%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"http://localhost:8888\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 10\n    }\n  }, \"Login with Spotify\")))))));\n}\n\nexport default App;\nexport const Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n`;\nexport const Wrapper = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n`;\nexport const LoginContent = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n\tbackground-color: #e0e0e0;\n\twidth: 80vw;\n`;","map":{"version":3,"sources":["/Users/sherveersinghpannu/projects/map/client_copy/src/App.js"],"names":["React","useState","useEffect","SpotifyWebApi","styled","Header","Sidebar","Content","axios","spotifyWeb","App","loggedIn","setLoggedIn","checkedOption","setCheckedOption","personalData","setPersonalData","topArtists","setTopArtists","hashParams","getHashParams","e","r","q","window","location","hash","substring","exec","decodeURIComponent","access_token","getMe","getTopArtists","console","log","saveUser","post","username","display_name","artists","then","res","access_t","result","fetch","method","headers","Authorization","setAccessToken","data","err","error","json","items","getMyTopArtists","padding","Container","div","Wrapper","LoginContent"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAO,WAAP;AACA,OAAOC,aAAP,MAA0B,oBAA1B;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,OAAP,MAAoB,sBAApB;AACA,OAAOC,OAAP,MAAoB,sBAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,MAAMC,UAAU,GAAG,IAAIN,aAAJ,EAAnB;;AAEA,SAASO,GAAT,GAAe;AACd,QAAM,CAAEC,QAAF,EAAYC,WAAZ,IAA4BX,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAAEY,aAAF,EAAiBC,gBAAjB,IAAsCb,QAAQ,EAApD;AACA,QAAM,CAAEc,YAAF,EAAgBC,eAAhB,IAAoCf,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAAEgB,UAAF,EAAcC,aAAd,IAAgCjB,QAAQ,CAAC,EAAD,CAA9C;AACA,MAAIkB,UAAU,GAAG,EAAjB;;AAEA,QAAMC,aAAa,GAAG,MAAM;AAC3B,QAAIC,CAAJ;AAAA,QACCC,CAAC,GAAG,sBADL;AAAA,QAECC,CAAC,GAAGC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,SAArB,CAA+B,CAA/B,CAFL;AAGAN,IAAAA,CAAC,GAAGC,CAAC,CAACM,IAAF,CAAOL,CAAP,CAAJ;;AACA,WAAOF,CAAP,EAAU;AACTF,MAAAA,UAAU,CAACE,CAAC,CAAC,CAAD,CAAF,CAAV,GAAmBQ,kBAAkB,CAACR,CAAC,CAAC,CAAD,CAAF,CAArC;AACAA,MAAAA,CAAC,GAAGC,CAAC,CAACM,IAAF,CAAOL,CAAP,CAAJ;AACA;;AACD,WAAOJ,UAAU,CAACW,YAAlB;AACA,GAVD;;AAWA5B,EAAAA,SAAS,CAAC,MAAM;AACfiB,IAAAA,UAAU,CAACW,YAAX,GAA0BlB,WAAW,CAAC,IAAD,CAArC,GAA8CA,WAAW,CAAC,KAAD,CAAzD;AACAmB,IAAAA,KAAK;AACLC,IAAAA,aAAa;AACbC,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BnB,YAA5B;AACA,GALQ,EAKN,EALM,CAAT;AAOAK,EAAAA,aAAa;;AAEb,QAAMe,QAAQ,GAAG,MAAM;AACtB3B,IAAAA,KAAK,CACH4B,IADF,CACO,iCADP,EAC0C;AACxCC,MAAAA,QAAQ,EAAEtB,YAAY,CAACuB,YADiB;AAExCC,MAAAA,OAAO,EAAEtB;AAF+B,KAD1C,EAKEuB,IALF,CAKQC,GAAD,IAASR,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BO,GAA5B,CALhB;AAMA,GAPD;;AASA,QAAMV,KAAK,GAAG,YAAY;AACzB,UAAMW,QAAQ,GAAGtB,aAAa,EAA9B;AACA,UAAMuB,MAAM,GAAG,MAAMC,KAAK,CACxB,oFADwB,EAEzB;AACCC,MAAAA,MAAM,EAAE,KADT;AAECC,MAAAA,OAAO,EAAE;AACRC,QAAAA,aAAa,EAAE,YAAYL;AADnB;AAFV,KAFyB,CAAL,CAQnBF,IARmB,CAQdP,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBvB,QAArB,CARc,CAArB;;AAUA,QAAI+B,QAAJ,EAAc;AACbjC,MAAAA,UAAU,CAACuC,cAAX,CAA0BN,QAA1B;AACAjC,MAAAA,UAAU,CACRsB,KADF,GACU;AADV,OAEES,IAFF,CAGE,UAASS,IAAT,EAAe;AACdjC,QAAAA,eAAe,CAACiC,IAAD,CAAf;AACAhB,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBe,IAArB;AACA,OANH,EAOEhB,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BvB,QAA/B,CAPF,EAQEC,WAAW,CAAC,IAAD,CARb,EASEqB,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BvB,QAA9B,CATF,EAUE,UAASuC,GAAT,EAAc;AACbjB,QAAAA,OAAO,CAACkB,KAAR,CAAcD,GAAd;AACA,OAZH;AAcA;;AACD,QAAID,IAAI,GAAG,MAAMN,MAAM,CAACS,IAAP,EAAjB;AACAnB,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBe,IAApB;AACAd,IAAAA,QAAQ;AACR,WAAOc,IAAI,CAACI,KAAZ;AACA,GAjCD;;AAmCA,QAAMrB,aAAa,GAAG,YAAY;AACjC,UAAMU,QAAQ,GAAGtB,aAAa,EAA9B;AACA,UAAMuB,MAAM,GAAG,MAAMC,KAAK,CACxB,oFADwB,EAEzB;AACCC,MAAAA,MAAM,EAAE,KADT;AAECC,MAAAA,OAAO,EAAE;AACRC,QAAAA,aAAa,EAAE,YAAYL;AADnB;AAFV,KAFyB,CAAL,CAQnBF,IARmB,CAQdP,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBvB,QAArB,CARc,CAArB;;AAUA,QAAI+B,QAAJ,EAAc;AACbjC,MAAAA,UAAU,CAACuC,cAAX,CAA0BN,QAA1B;AACAjC,MAAAA,UAAU,CACR6C,eADF,GACoB;AADpB,OAEEd,IAFF,CAGE,UAASS,IAAT,EAAe;AACd/B,QAAAA,aAAa,CAAC+B,IAAD,CAAb;AACA,OALH,EAME,UAASC,GAAT,EAAc;AACbjB,QAAAA,OAAO,CAACkB,KAAR,CAAcD,GAAd;AACA,OARH;AAUA;;AACD,QAAID,IAAI,GAAG,MAAMN,MAAM,CAACS,IAAP,EAAjB;AACAnB,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBe,IAApB;AACA,WAAOA,IAAI,CAACI,KAAZ;AACA,GA5BD;;AA8BA,sBACC,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,eAEC,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,OAAD;AACC,IAAA,gBAAgB,EAAEvC,gBADnB;AAEC,IAAA,aAAa,EAAED,aAFhB;AAGC,IAAA,QAAQ,EAAEF,QAHX;AAIC,IAAA,YAAY,EAAEI,YAJf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,eAOC,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAQ,IAAA,GAAG,EAAC,uCAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CADD,eAIC,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACEJ,QAAQ,gBACR,oBAAC,OAAD;AAAS,IAAA,aAAa,EAAEM,UAAxB;AAAoC,IAAA,SAAS,EAAEF,YAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADQ,gBAGR;AAAK,IAAA,KAAK,EAAE;AAAEwC,MAAAA,OAAO,EAAE;AAAX,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAG,IAAA,IAAI,EAAC,uBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADD,CADD,CAJF,CAJD,CAPD,CAFD,CADD;AA6BA;;AAED,eAAe7C,GAAf;AAEA,OAAO,MAAM8C,SAAS,GAAGpD,MAAM,CAACqD,GAAI;;;CAA7B;AAKP,OAAO,MAAMC,OAAO,GAAGtD,MAAM,CAACqD,GAAI;;;CAA3B;AAKP,OAAO,MAAME,YAAY,GAAGvD,MAAM,CAACqD,GAAI;;;;;CAAhC","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport SpotifyWebApi from 'spotify-web-api-js';\nimport styled from 'styled-components';\nimport Header from './Components/Header';\nimport Sidebar from './Components/Sidebar';\nimport Content from './Components/Content';\nimport axios from 'axios';\n\nconst spotifyWeb = new SpotifyWebApi();\n\nfunction App() {\n\tconst [ loggedIn, setLoggedIn ] = useState(false);\n\tconst [ checkedOption, setCheckedOption ] = useState();\n\tconst [ personalData, setPersonalData ] = useState([]);\n\tconst [ topArtists, setTopArtists ] = useState([]);\n\tlet hashParams = {};\n\n\tconst getHashParams = () => {\n\t\tvar e,\n\t\t\tr = /([^&;=]+)=?([^&;]*)/g,\n\t\t\tq = window.location.hash.substring(1);\n\t\te = r.exec(q);\n\t\twhile (e) {\n\t\t\thashParams[e[1]] = decodeURIComponent(e[2]);\n\t\t\te = r.exec(q);\n\t\t}\n\t\treturn hashParams.access_token;\n\t};\n\tuseEffect(() => {\n\t\thashParams.access_token ? setLoggedIn(true) : setLoggedIn(false);\n\t\tgetMe();\n\t\tgetTopArtists();\n\t\tconsole.log('PersonalData', personalData);\n\t}, []);\n\n\tgetHashParams();\n\n\tconst saveUser = () => {\n\t\taxios\n\t\t\t.post('http://localhost:8000/api/music', {\n\t\t\t\tusername: personalData.display_name,\n\t\t\t\tartists: topArtists\n\t\t\t})\n\t\t\t.then((res) => console.log('did it work?', res));\n\t};\n\n\tconst getMe = async () => {\n\t\tconst access_t = getHashParams();\n\t\tconst result = await fetch(\n\t\t\t`https://api.spotify.com/v1/me/top/artists?time_range=medium_term&limit=10&offset=5`,\n\t\t\t{\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: 'Bearer ' + access_t\n\t\t\t\t}\n\t\t\t}\n\t\t).then(console.log('logeg', loggedIn));\n\n\t\tif (access_t) {\n\t\t\tspotifyWeb.setAccessToken(access_t);\n\t\t\tspotifyWeb\n\t\t\t\t.getMe() // note that we don't pass a user id\n\t\t\t\t.then(\n\t\t\t\t\tfunction(data) {\n\t\t\t\t\t\tsetPersonalData(data);\n\t\t\t\t\t\tconsole.log('data?', data);\n\t\t\t\t\t},\n\t\t\t\t\tconsole.log('loggedin before', loggedIn),\n\t\t\t\t\tsetLoggedIn(true),\n\t\t\t\t\tconsole.log('loggedin after', loggedIn),\n\t\t\t\t\tfunction(err) {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t}\n\t\tlet data = await result.json();\n\t\tconsole.log('DATA', data);\n\t\tsaveUser();\n\t\treturn data.items;\n\t};\n\n\tconst getTopArtists = async () => {\n\t\tconst access_t = getHashParams();\n\t\tconst result = await fetch(\n\t\t\t`https://api.spotify.com/v1/me/top/artists?time_range=medium_term&limit=10&offset=5`,\n\t\t\t{\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: 'Bearer ' + access_t\n\t\t\t\t}\n\t\t\t}\n\t\t).then(console.log('logeg', loggedIn));\n\n\t\tif (access_t) {\n\t\t\tspotifyWeb.setAccessToken(access_t);\n\t\t\tspotifyWeb\n\t\t\t\t.getMyTopArtists() // note that we don't pass a user id\n\t\t\t\t.then(\n\t\t\t\t\tfunction(data) {\n\t\t\t\t\t\tsetTopArtists(data);\n\t\t\t\t\t},\n\t\t\t\t\tfunction(err) {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t}\n\t\tlet data = await result.json();\n\t\tconsole.log('DATA', data);\n\t\treturn data.items;\n\t};\n\n\treturn (\n\t\t<Container>\n\t\t\t<Header />\n\t\t\t<Wrapper>\n\t\t\t\t<Sidebar\n\t\t\t\t\tsetCheckedOption={setCheckedOption}\n\t\t\t\t\tcheckedOption={checkedOption}\n\t\t\t\t\tloggedIn={loggedIn}\n\t\t\t\t\tpersonalData={personalData}\n\t\t\t\t/>\n\t\t\t\t<Wrapper>\n\t\t\t\t\t<body>\n\t\t\t\t\t\t<script src=\"https://sdk.scdn.co/spotify-player.js\" />\n\t\t\t\t\t</body>\n\t\t\t\t\t<LoginContent>\n\t\t\t\t\t\t{loggedIn ? (\n\t\t\t\t\t\t\t<Content topArtistData={topArtists} musicData={personalData} />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div style={{ padding: '10%' }}>\n\t\t\t\t\t\t\t\t<a href=\"http://localhost:8888\">\n\t\t\t\t\t\t\t\t\t<button>Login with Spotify</button>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</LoginContent>\n\t\t\t\t</Wrapper>\n\t\t\t</Wrapper>\n\t\t</Container>\n\t);\n}\n\nexport default App;\n\nexport const Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n`;\n\nexport const Wrapper = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n`;\n\nexport const LoginContent = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n\tbackground-color: #e0e0e0;\n\twidth: 80vw;\n`;\n"]},"metadata":{},"sourceType":"module"}