{"ast":null,"code":"var _jsxFileName = \"/Users/sherveersinghpannu/projects/map/client_copy/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport SpotifyWebApi from 'spotify-web-api-js';\nimport axios from 'axios';\nconst spotifyWeb = new SpotifyWebApi();\n\nfunction App() {\n  /* constructur();\n  {\n  \tvar hashParams = this.getHashParams;\n  } */\n  const clientId = 'f2c4a36edf6541c7922bbaab046328a1';\n  const clientSecret = '835373c22ef349ee9c10567e75ac5ba5';\n  const [accessToken, setAccessToken] = useState('');\n  const [inputValue, setInputValue] = useState('');\n  const test = 'hello';\n  var hashParams = {};\n\n  const getHashParams = () => {\n    var e,\n        r = /([^&;=]+)=?([^&;]*)/g,\n        q = window.location.hash.substring(1);\n    e = r.exec(q);\n\n    while (e) {\n      hashParams[e[1]] = decodeURIComponent(e[2]);\n      e = r.exec(q);\n    }\n\n    console.log('hashparams', hashParams);\n    return hashParams.access_token;\n  };\n\n  getHashParams();\n  useEffect(() => {\n    axios.post('http://localhost:8000/api/user', {\n      userName: 'Sher',\n      artists: ['kanye', 'cher']\n    }).then(res => console.log('result??', res));\n  }, []);\n\n  const getInfo = async () => {\n    //const token = _getToken();\n    //let token = await _getToken();\n    const access_t = getHashParams();\n    console.log('getting hash params: ', access_t);\n    /* const limit = 10;\n    \tconst result = await fetch(\n    \t`https://api.spotify.com/v1/me/top/artists?time_range=medium_term&limit=10&offset=5`,\n    \t{\n    \t\tmethod: 'GET',\n    \t\theaders: {\n    \t\t\tAuthorization: 'Bearer ' + access_t\n    \t\t}\n    \t}\n    ); */\n\n    if (access_t) {\n      spotifyWeb.setAccessToken(access_t);\n      console.log('test');\n      spotifyWeb.getMyTopArtists() // note that we don't pass a user id\n      .then(function (data) {\n        console.log('User playlists', data);\n      }, function (err) {\n        console.error('error melding ', err);\n      });\n    }\n    /* console.log('Ann4prez', spotifyWeb.getMyTopArtists());\n    \tconsole.log('result -> ', result);\n    let data = await result.json();\n    console.log('data; ', data);\n    return data.items; */\n\n  };\n  /* const spotifyLogin = () => {\n  \t_getToken();\n  };\n  \tconst _getToken = async () => {\n  \tconsole.log('kommer vi hit');\n  \tconst result = await fetch('https://accounts.spotify.com/api/token', {\n  \t\tmethod: 'POST',\n  \t\theaders: {\n  \t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n  \t\t\tAuthorization: 'Basic ' + btoa(clientId + ':' + clientSecret)\n  \t\t},\n  \t\tbody: 'grant_type=client_credentials'\n  \t});\n  \t\tconst data = await result.json();\n  \tconsole.log('data:', data.access_token);\n  \t\tsetAccessToken(data.access_token);\n  \treturn data;\n  }; */\n  // UI Module\n\n\n  const updateInputValue = e => {\n    //e.preventDefault()\n    setInputValue(e.target.value);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"body\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"script\", {\n    src: \"https://sdk.scdn.co/spotify-player.js\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 5\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"http://localhost:8888\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 6\n    }\n  }, \"Login with Spotify\")), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => getInfo(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 5\n    }\n  }, \"get info\"), /*#__PURE__*/React.createElement(\"input\", {\n    value: inputValue,\n    onChange: e => updateInputValue(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 5\n    }\n  }, inputValue)));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/sherveersinghpannu/projects/map/client_copy/src/App.js"],"names":["React","useState","useEffect","SpotifyWebApi","axios","spotifyWeb","App","clientId","clientSecret","accessToken","setAccessToken","inputValue","setInputValue","test","hashParams","getHashParams","e","r","q","window","location","hash","substring","exec","decodeURIComponent","console","log","access_token","post","userName","artists","then","res","getInfo","access_t","getMyTopArtists","data","err","error","updateInputValue","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport SpotifyWebApi from 'spotify-web-api-js';\nimport axios from 'axios';\n\nconst spotifyWeb = new SpotifyWebApi();\n\nfunction App() {\n\t/* constructur();\n\t{\n\t\tvar hashParams = this.getHashParams;\n\t} */\n\tconst clientId = 'f2c4a36edf6541c7922bbaab046328a1';\n\tconst clientSecret = '835373c22ef349ee9c10567e75ac5ba5';\n\tconst [ accessToken, setAccessToken ] = useState('');\n\tconst [ inputValue, setInputValue ] = useState('');\n\tconst test = 'hello';\n\tvar hashParams = {};\n\tconst getHashParams = () => {\n\t\tvar e,\n\t\t\tr = /([^&;=]+)=?([^&;]*)/g,\n\t\t\tq = window.location.hash.substring(1);\n\t\te = r.exec(q);\n\t\twhile (e) {\n\t\t\thashParams[e[1]] = decodeURIComponent(e[2]);\n\t\t\te = r.exec(q);\n\t\t}\n\t\tconsole.log('hashparams', hashParams);\n\t\treturn hashParams.access_token;\n\t};\n\n\tgetHashParams();\n\tuseEffect(() => {\n\t\taxios\n\t\t\t.post('http://localhost:8000/api/user', {\n\t\t\t\tuserName: 'Sher',\n\t\t\t\tartists: [ 'kanye', 'cher' ]\n\t\t\t})\n\t\t\t.then((res) => console.log('result??', res));\n\t}, []);\n\n\tconst getInfo = async () => {\n\t\t//const token = _getToken();\n\t\t//let token = await _getToken();\n\n\t\tconst access_t = getHashParams();\n\t\tconsole.log('getting hash params: ', access_t);\n\n\t\t/* const limit = 10;\n\n\t\tconst result = await fetch(\n\t\t\t`https://api.spotify.com/v1/me/top/artists?time_range=medium_term&limit=10&offset=5`,\n\t\t\t{\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: 'Bearer ' + access_t\n\t\t\t\t}\n\t\t\t}\n\t\t); */\n\n\t\tif (access_t) {\n\t\t\tspotifyWeb.setAccessToken(access_t);\n\t\t\tconsole.log('test');\n\t\t\tspotifyWeb\n\t\t\t\t.getMyTopArtists() // note that we don't pass a user id\n\t\t\t\t.then(\n\t\t\t\t\tfunction(data) {\n\t\t\t\t\t\tconsole.log('User playlists', data);\n\t\t\t\t\t},\n\t\t\t\t\tfunction(err) {\n\t\t\t\t\t\tconsole.error('error melding ', err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t}\n\n\t\t/* console.log('Ann4prez', spotifyWeb.getMyTopArtists());\n\n\t\tconsole.log('result -> ', result);\n\t\tlet data = await result.json();\n\t\tconsole.log('data; ', data);\n\t\treturn data.items; */\n\t};\n\n\t/* const spotifyLogin = () => {\n\t\t_getToken();\n\t};\n\n\tconst _getToken = async () => {\n\t\tconsole.log('kommer vi hit');\n\t\tconst result = await fetch('https://accounts.spotify.com/api/token', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t\tAuthorization: 'Basic ' + btoa(clientId + ':' + clientSecret)\n\t\t\t},\n\t\t\tbody: 'grant_type=client_credentials'\n\t\t});\n\n\t\tconst data = await result.json();\n\t\tconsole.log('data:', data.access_token);\n\n\t\tsetAccessToken(data.access_token);\n\t\treturn data;\n\t}; */\n\n\t// UI Module\n\n\tconst updateInputValue = (e) => {\n\t\t//e.preventDefault()\n\t\tsetInputValue(e.target.value);\n\t};\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<body>\n\t\t\t\t<script src=\"https://sdk.scdn.co/spotify-player.js\" />\n\t\t\t</body>\n\t\t\t<div className=\"container\">\n\t\t\t\t<a href=\"http://localhost:8888\">\n\t\t\t\t\t<button>Login with Spotify</button>\n\t\t\t\t</a>\n\t\t\t\t<button onClick={() => getInfo()}>get info</button>\n\n\t\t\t\t<input value={inputValue} onChange={(e) => updateInputValue(e)} />\n\t\t\t\t<p>{inputValue}</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}